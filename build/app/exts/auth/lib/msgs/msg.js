define("app/exts/auth/lib/msgs/msg",["require","module","exports","jquery","underscore","app/exts/arale/base","app/exts/auth/lib/utils","css!app/exts/auth/lib/msgs/msg.css"],function(e,t,r){var s=e("jquery"),a=e("underscore"),n=e("app/exts/arale/base"),i=e("app/exts/auth/lib/utils");e("css!app/exts/auth/lib/msgs/msg.css");var p=n.extend({initialize:function(e){var t=this;e||(e={}),p.superclass.initialize.call(t,e)},render:function(){var e=this;if(!e.get("target").length)return!1;var t=e._getWrapper();e.set("wrapper",t),e.get("isExist")||t.hide();var r=e.get("host");r.on("error",function(t){var r=t.rule,s=r.msg("error");e.show("error",s)}),r.on("success",function(t){var r=t.target,s=r.get("target"),a=s.attr("success-msg");a?(style=t.style||"success",e.show(style,a)):e.hide()})},hide:function(){var e=this,t=e.get("wrapper");i.buffer(function(){t.slideUp(e.get("speed"))},50)()},show:function(e,t){var r=this;if(!a.isString(e)||!a.isString(t))return r;var s=r.get("wrapper");i.buffer(function(){var a={style:e,msg:t};r._create(a),s.slideDown(r.get("speed"))},50)()},_create:function(e){var t=this,r=t.get("tpl"),s=t.get("wrapper"),n=a.template(r)(e);return s.html(n)},_getWrapper:function(){var e=this,t=e.get("wrapper"),r=e.get("target");if(!r.length)return e;if(!t.length){var a=r.attr("msg-wrapper");a&&(t=s(a))}if(!t.length){if(r.length>1){r=r.eq(r.length-1);var n=s(r.parent());(n.hasClass("radio")||n.hasClass("checkbox"))&&(r=r.parent())}var n=s(r.parent());t=s('<div class="msg-wrapper"></div>').appendTo(n)}return t},attrs:{host:{value:""},target:{value:"",getter:function(e){return s(e)}},tpl:{value:'<p class="auth-msg auth-<%= style %>"><%= msg %></p>'},wrapper:{value:"",getter:function(e){return s(e)}},isExist:{value:!1,getter:function(e){var t=this,r=t.get("wrapper");return!!r.length&&r.find(".auth-msg").length}},speed:{value:200}}});return p});