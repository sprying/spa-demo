define("app/exts/arale/events",function(){function t(){}function r(t,r,e){var n=!0;if(t){var o=0,i=t.length,s=r[0],f=r[1],a=r[2];switch(r.length){case 0:for(;o<i;o+=2)n=!1!==t[o].call(t[o+1]||e)&&n;break;case 1:for(;o<i;o+=2)n=!1!==t[o].call(t[o+1]||e,s)&&n;break;case 2:for(;o<i;o+=2)n=!1!==t[o].call(t[o+1]||e,s,f)&&n;break;case 3:for(;o<i;o+=2)n=!1!==t[o].call(t[o+1]||e,s,f,a)&&n;break;default:for(;o<i;o+=2)n=!1!==t[o].apply(t[o+1]||e,r)&&n}}return n}function e(t){return"[object Function]"===Object.prototype.toString.call(t)}var n=/\s+/;t.prototype.on=function(t,r,e){var o,i,s;if(!r)return this;for(o=this.__events||(this.__events={}),t=t.split(n);i=t.shift();)s=o[i]||(o[i]=[]),s.push(r,e);return this},t.prototype.once=function(t,r,e){var n=this,o=function(){n.off(t,o),r.apply(e||n,arguments)};return this.on(t,o,e)},t.prototype.off=function(t,r,e){var i,s,f,a;if(!(i=this.__events))return this;if(!(t||r||e))return delete this.__events,this;for(t=t?t.split(n):o(i);s=t.shift();)if(f=i[s])if(r||e)for(a=f.length-2;a>=0;a-=2)r&&f[a]!==r||e&&f[a+1]!==e||f.splice(a,2);else delete i[s];return this},t.prototype.trigger=function(t){var e,o,i,s,f,a,p=[],c=!0;if(!(e=this.__events))return this;for(t=t.split(n),f=1,a=arguments.length;f<a;f++)p[f-1]=arguments[f];for(;o=t.shift();)(i=e.all)&&(i=i.slice()),(s=e[o])&&(s=s.slice()),"all"!==o&&(c=r(s,p,this)&&c),c=r(i,[o].concat(p),this)&&c;return c},t.prototype.emit=t.prototype.trigger;var o=Object.keys;return o||(o=function(t){var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(e);return r}),t.mixTo=function(r){var n=t.prototype;if(e(r)){for(var o in n)n.hasOwnProperty(o)&&(r.prototype[o]=n[o]);Object.keys(n).forEach(function(t){r.prototype[t]=n[t]})}else{var i=new t;for(var o in n)n.hasOwnProperty(o)&&function(t){r[t]=function(){return n[t].apply(i,Array.prototype.slice.call(arguments)),this}}(o)}},t});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dHMvYXJhbGUvZXZlbnRzLmpzIl0sIm5hbWVzIjpbImRlZmluZSIsIkV2ZW50cyIsInRyaWdnZXJFdmVudHMiLCJsaXN0IiwiYXJncyIsImNvbnRleHQiLCJwYXNzIiwiaSIsImwiLCJsZW5ndGgiLCJhMSIsImEyIiwiYTMiLCJjYWxsIiwiYXBwbHkiLCJpc0Z1bmN0aW9uIiwiZnVuYyIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiZXZlbnRTcGxpdHRlciIsIm9uIiwiZXZlbnRzIiwiY2FsbGJhY2siLCJjYWNoZSIsImV2ZW50IiwidGhpcyIsIl9fZXZlbnRzIiwic3BsaXQiLCJzaGlmdCIsInB1c2giLCJvbmNlIiwidGhhdCIsImNiIiwib2ZmIiwiYXJndW1lbnRzIiwia2V5cyIsInNwbGljZSIsInRyaWdnZXIiLCJhbGwiLCJsZW4iLCJyZXN0IiwicmV0dXJuZWQiLCJzbGljZSIsImNvbmNhdCIsImVtaXQiLCJvIiwicmVzdWx0IiwibmFtZSIsImhhc093blByb3BlcnR5IiwibWl4VG8iLCJyZWNlaXZlciIsInByb3RvIiwia2V5IiwiZm9yRWFjaCIsIkFycmF5Il0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBTyx3QkFBeUIsV0FxQjlCLFFBQVNDLE1BMkpULFFBQVNDLEdBQWNDLEVBQU1DLEVBQU1DLEdBQ2pDLEdBQUlDLElBQU8sQ0FFWCxJQUFJSCxFQUFNLENBQ1IsR0FBSUksR0FBSSxFQUFHQyxFQUFJTCxFQUFLTSxPQUFRQyxFQUFLTixFQUFLLEdBQUlPLEVBQUtQLEVBQUssR0FBSVEsRUFBS1IsRUFBSyxFQUdsRSxRQUFRQSxFQUFLSyxRQUNYLElBQUssR0FBRyxLQUFPRixFQUFJQyxFQUFHRCxHQUFLLEVBQUlELEdBQWdELElBQXpDSCxFQUFLSSxHQUFHTSxLQUFLVixFQUFLSSxFQUFJLElBQU1GLElBQXNCQyxDQUFNLE1BQzlGLEtBQUssR0FBRyxLQUFPQyxFQUFJQyxFQUFHRCxHQUFLLEVBQUlELEdBQW9ELElBQTdDSCxFQUFL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QSxJQUdUekMsRUFBT2lCLFVBQVUyQixLQUFPNUMsRUFBT2lCLFVBQVVvQixPQU16QyxJQUFJRixHQUFPbkIsT0FBT21CLElBc0VsQixPQXBFS0EsS0FDSEEsRUFBTyxTQUFTVSxHQUNkLEdBQUlDLEtBRUosS0FBSyxHQUFJQyxLQUFRRixHQUNYQSxFQUFFRyxlQUFlRCxJQUNuQkQsRUFBT2pCLEtBQUtrQixFQUdoQixPQUFPRCxLQUtYOUMsRUFBT2lELE1BQVEsU0FBU0MsR0FDdEIsR0FBSUMsR0FBUW5ELEVBQU9pQixTQUVuQixJQUFJSCxFQUFXb0MsR0FBVyxDQUN4QixJQUFLLEdBQUlFLEtBQU9ELEdBQ1ZBLEVBQU1ILGVBQWVJLEtBQ3ZCRixFQUFTakMsVUFBVW1DLEdBQU9ELEVBQU1DLEdBR3BDcEMsUUFBT21CLEtBQUtnQixHQUFPRSxRQUFRLFNBQVNELEdBQ2xDRixFQUFTakMsVUFBVW1DLEdBQU9ELEVBQU1DLFNBRy9CLENBQ0gsR0FBSTVCLEdBQVEsR0FBSXhCLEVBQ2hCLEtBQUssR0FBSW9ELEtBQU9ELEdBQ1ZBLEVBQU1ILGVBQWVJLElBTTdCLFNBQW1CQSxHQUNqQkYsRUFBU0UsR0FBTyxXQUVkLE1BREFELEdBQU1DLEdBQUt2QyxNQUFNVyxFQUFPOEIsTUFBTXJDLFVBQVV5QixNQUFNOUIsS0FBS3NCLFlBQzVDVCxPQVJLMkIsS0FxQ1hwRCIsImZpbGUiOiJleHRzL2FyYWxlL2V2ZW50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImRlZmluZSgnYXBwL2V4dHMvYXJhbGUvZXZlbnRzJywgZnVuY3Rpb24gKCkge1xuICAvLyBFdmVudHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gVGhhbmtzIHRvOlxuICAvLyAgLSBodHRwczovL2dpdGh1Yi5jb20vZG9jdW1lbnRjbG91ZC9iYWNrYm9uZS9ibG9iL21hc3Rlci9iYWNrYm9uZS5qc1xuICAvLyAgLSBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvYmxvYi9tYXN0ZXIvbGliL2V2ZW50cy5qc1xuXG5cbiAgLy8gUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gc3BsaXQgZXZlbnQgc3RyaW5nc1xuICB2YXIgZXZlbnRTcGxpdHRlciA9IC9cXHMrL1xuXG5cbiAgLy8gQSBtb2R1bGUgdGhhdCBjYW4gYmUgbWl4ZWQgaW4gdG8gKmFueSBvYmplY3QqIGluIG9yZGVyIHRvIHByb3ZpZGUgaXRcbiAgLy8gd2l0aCBjdXN0b20gZXZlbnRzLiBZb3UgbWF5IGJpbmQgd2l0aCBgb25gIG9yIHJlbW92ZSB3aXRoIGBvZmZgIGNhbGxiYWNrXG4gIC8vIGZ1bmN0aW9ucyB0byBhbiBldmVudDsgYHRyaWdnZXJgLWluZyBhbiBldmVudCBmaXJlcyBhbGwgY2FsbGJhY2tzIGluXG4gIC8vIHN1Y2Nlc3Npb24uXG4gIC8vXG4gIC8vICAgICB2YXIgb2JqZWN0ID0gbmV3IEV2ZW50cygpXG4gIC8vICAgICBvYmplY3Qub24oJ2V4cGFuZCcsIGZ1bmN0aW9uKCl7IGFsZXJ0KCdleHBhbmRlZCcpIH0pXG4gIC8vICAgICBvYmplY3QudHJpZ2dlcignZXhwYW5kJylcbiAgLy9cbiAgZnVuY3Rpb24gRXZlbnRzKCkge1xuICB9XG5cblxuICAvLyBCaW5kIG9uZSBvciBtb3JlIHNwYWNlIHNlcGFyYXRlZCBldmVudHMsIGBldmVudHNgLCB0byBhIGBjYWxsYmFja2BcbiAgLy8gZnVuY3Rpb24uIFBhc3NpbmcgYFwiYWxsXCJgIHdpbGwgYmluZCB0aGUgY2FsbGJhY2sgdG8gYWxsIGV2ZW50cyBmaXJlZC5cbiAgRXZlbnRzLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGV2ZW50cywgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICB2YXIgY2FjaGUsIGV2ZW50LCBsaXN0XG4gICAgaWYgKCFjYWxsYmFjaykgcmV0dXJuIHRoaXNcblxuICAgIGNhY2hlID0gdGhpcy5fX2V2ZW50cyB8fCAodGhpcy5fX2V2ZW50cyA9IHt9KVxuICAgIGV2ZW50cyA9IGV2ZW50cy5zcGxpdChldmVudFNwbGl0dGVyKVxuXG4gICAgd2hpbGUgKGV2ZW50ID0gZXZlbnRzLnNoaWZ0KCkpIHtcbiAgICAgIGxpc3QgPSBjYWNoZVtldmVudF0gfHwgKGNhY2hlW2V2ZW50XSA9IFtdKVxuICAgICAgbGlzdC5wdXNoKGNhbGxiYWNrLCBjb250ZXh0KVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBFdmVudHMucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbihldmVudHMsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgdmFyIGNiID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGF0Lm9mZihldmVudHMsIGNiKVxuICAgICAgY2FsbGJhY2suYXBwbHkoY29udGV4dCB8fCB0aGF0LCBhcmd1bWVudHMpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9uKGV2ZW50cywgY2IsIGNvbnRleHQpXG4gIH1cblxuICAvLyBSZW1vdmUgb25lIG9yIG1hbnkgY2FsbGJhY2tzLiBJZiBgY29udGV4dGAgaXMgbnVsbCwgcmVtb3ZlcyBhbGwgY2FsbGJhY2tzXG4gIC8vIHdpdGggdGhhdCBmdW5jdGlvbi4gSWYgYGNhbGxiYWNrYCBpcyBudWxsLCByZW1vdmVzIGFsbCBjYWxsYmFja3MgZm9yIHRoZVxuICAvLyBldmVudC4gSWYgYGV2ZW50c2AgaXMgbnVsbCwgcmVtb3ZlcyBhbGwgYm91bmQgY2FsbGJhY2tzIGZvciBhbGwgZXZlbnRzLlxuICBFdmVudHMucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKGV2ZW50cywgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICB2YXIgY2FjaGUsIGV2ZW50LCBsaXN0LCBpXG5cbiAgICAvLyBObyBldmVudHMsIG9yIHJlbW92aW5nICphbGwqIGV2ZW50cy5cbiAgICBpZiAoIShjYWNoZSA9IHRoaXMuX19ldmVudHMpKSByZXR1cm4gdGhpc1xuICAgIGlmICghKGV2ZW50cyB8fCBjYWxsYmFjayB8fCBjb250ZXh0KSkge1xuICAgICAgZGVsZXRlIHRoaXMuX19ldmVudHNcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgZXZlbnRzID0gZXZlbnRzID8gZXZlbnRzLnNwbGl0KGV2ZW50U3BsaXR0ZXIpIDoga2V5cyhjYWNoZSlcblxuICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgY2FsbGJhY2sgbGlzdCwgc3BsaWNpbmcgd2hlcmUgYXBwcm9wcmlhdGUuXG4gICAgd2hpbGUgKGV2ZW50ID0gZXZlbnRzLnNoaWZ0KCkpIHtcbiAgICAgIGxpc3QgPSBjYWNoZVtldmVudF1cbiAgICAgIGlmICghbGlzdCkgY29udGludWVcblxuICAgICAgaWYgKCEoY2FsbGJhY2sgfHwgY29udGV4dCkpIHtcbiAgICAgICAgZGVsZXRlIGNhY2hlW2V2ZW50XVxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDI7IGkgPj0gMDsgaSAtPSAyKSB7XG4gICAgICAgIGlmICghKGNhbGxiYWNrICYmIGxpc3RbaV0gIT09IGNhbGxiYWNrIHx8XG4gICAgICAgICAgICBjb250ZXh0ICYmIGxpc3RbaSArIDFdICE9PSBjb250ZXh0KSkge1xuICAgICAgICAgIGxpc3Quc3BsaWNlKGksIDIpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvLyBUcmlnZ2VyIG9uZSBvciBtYW55IGV2ZW50cywgZmlyaW5nIGFsbCBib3VuZCBjYWxsYmFja3MuIENhbGxiYWNrcyBhcmVcbiAgLy8gcGFzc2VkIHRoZSBzYW1lIGFyZ3VtZW50cyBhcyBgdHJpZ2dlcmAgaXMsIGFwYXJ0IGZyb20gdGhlIGV2ZW50IG5hbWVcbiAgLy8gKHVubGVzcyB5b3UncmUgbGlzdGVuaW5nIG9uIGBcImFsbFwiYCwgd2hpY2ggd2lsbCBjYXVzZSB5b3VyIGNhbGxiYWNrIHRvXG4gIC8vIHJlY2VpdmUgdGhlIHRydWUgbmFtZSBvZiB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50KS5cbiAgRXZlbnRzLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oZXZlbnRzKSB7XG4gICAgdmFyIGNhY2hlLCBldmVudCwgYWxsLCBsaXN0LCBpLCBsZW4sIHJlc3QgPSBbXSwgYXJncywgcmV0dXJuZWQgPSB0cnVlXG4gICAgaWYgKCEoY2FjaGUgPSB0aGlzLl9fZXZlbnRzKSkgcmV0dXJuIHRoaXNcblxuICAgIGV2ZW50cyA9IGV2ZW50cy5zcGxpdChldmVudFNwbGl0dGVyKVxuXG4gICAgLy8gRmlsbCB1cCBgcmVzdGAgd2l0aCB0aGUgY2FsbGJhY2sgYXJndW1lbnRzLiAgU2luY2Ugd2UncmUgb25seSBjb3B5aW5nXG4gICAgLy8gdGhlIHRhaWwgb2YgYGFyZ3VtZW50c2AsIGEgbG9vcCBpcyBtdWNoIGZhc3RlciB0aGFuIEFycmF5I3NsaWNlLlxuICAgIGZvciAoaSA9IDEsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgcmVzdFtpIC0gMV0gPSBhcmd1bWVudHNbaV1cbiAgICB9XG5cbiAgICAvLyBGb3IgZWFjaCBldmVudCwgd2FsayB0aHJvdWdoIHRoZSBsaXN0IG9mIGNhbGxiYWNrcyB0d2ljZSwgZmlyc3QgdG9cbiAgICAvLyB0cmlnZ2VyIHRoZSBldmVudCwgdGhlbiB0byB0cmlnZ2VyIGFueSBgXCJhbGxcImAgY2FsbGJhY2tzLlxuICAgIHdoaWxlIChldmVudCA9IGV2ZW50cy5zaGlmdCgpKSB7XG4gICAgICAvLyBDb3B5IGNhbGxiYWNrIGxpc3RzIHRvIHByZXZlbnQgbW9kaWZpY2F0aW9uLlxuICAgICAgaWYgKGFsbCA9IGNhY2hlLmFsbCkgYWxsID0gYWxsLnNsaWNlKClcbiAgICAgIGlmIChsaXN0ID0gY2FjaGVbZXZlbnRdKSBsaXN0ID0gbGlzdC5zbGljZSgpXG5cbiAgICAgIC8vIEV4ZWN1dGUgZXZlbnQgY2FsbGJhY2tzIGV4Y2VwdCBvbmUgbmFtZWQgXCJhbGxcIlxuICAgICAgaWYgKGV2ZW50ICE9PSAnYWxsJykge1xuICAgICAgICByZXR1cm5lZCA9IHRyaWdnZXJFdmVudHMobGlzdCwgcmVzdCwgdGhpcykgJiYgcmV0dXJuZWRcbiAgICAgIH1cblxuICAgICAgLy8gRXhlY3V0ZSBcImFsbFwiIGNhbGxiYWNrcy5cbiAgICAgIHJldHVybmVkID0gdHJpZ2dlckV2ZW50cyhhbGwsIFtldmVudF0uY29uY2F0KHJlc3QpLCB0aGlzKSAmJiByZXR1cm5lZFxuICAgIH1cblxuICAgIHJldHVybiByZXR1cm5lZFxuICB9XG5cbiAgRXZlbnRzLnByb3RvdHlwZS5lbWl0ID0gRXZlbnRzLnByb3RvdHlwZS50cmlnZ2VyXG5cblxuICAvLyBIZWxwZXJzXG4gIC8vIC0tLS0tLS1cblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzXG5cbiAgaWYgKCFrZXlzKSB7XG4gICAga2V5cyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXVxuXG4gICAgICBmb3IgKHZhciBuYW1lIGluIG8pIHtcbiAgICAgICAgaWYgKG8uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChuYW1lKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICB9XG5cbiAgLy8gTWl4IGBFdmVudHNgIHRvIG9iamVjdCBpbnN0YW5jZSBvciBDbGFzcyBmdW5jdGlvbi5cbiAgRXZlbnRzLm1peFRvID0gZnVuY3Rpb24ocmVjZWl2ZXIpIHtcbiAgICB2YXIgcHJvdG8gPSBFdmVudHMucHJvdG90eXBlXG5cbiAgICBpZiAoaXNGdW5jdGlvbihyZWNlaXZlcikpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBwcm90bykge1xuICAgICAgICBpZiAocHJvdG8uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIHJlY2VpdmVyLnByb3RvdHlwZVtrZXldID0gcHJvdG9ba2V5XVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBPYmplY3Qua2V5cyhwcm90bykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgcmVjZWl2ZXIucHJvdG90eXBlW2tleV0gPSBwcm90b1trZXldXG4gICAgICB9KVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudHNcbiAgICAgIGZvciAodmFyIGtleSBpbiBwcm90bykge1xuICAgICAgICBpZiAocHJvdG8uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGNvcHlQcm90byhrZXkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb3B5UHJvdG8oa2V5KSB7XG4gICAgICByZWNlaXZlcltrZXldID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHByb3RvW2tleV0uYXBwbHkoZXZlbnQsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gRXhlY3V0ZSBjYWxsYmFja3NcbiAgZnVuY3Rpb24gdHJpZ2dlckV2ZW50cyhsaXN0LCBhcmdzLCBjb250ZXh0KSB7XG4gICAgdmFyIHBhc3MgPSB0cnVlXG5cbiAgICBpZiAobGlzdCkge1xuICAgICAgdmFyIGkgPSAwLCBsID0gbGlzdC5sZW5ndGgsIGExID0gYXJnc1swXSwgYTIgPSBhcmdzWzFdLCBhMyA9IGFyZ3NbMl1cbiAgICAgIC8vIGNhbGwgaXMgZmFzdGVyIHRoYW4gYXBwbHksIG9wdGltaXplIGxlc3MgdGhhbiAzIGFyZ3VcbiAgICAgIC8vIGh0dHA6Ly9ibG9nLmNzZG4ubmV0L3poZW5neWluaHVpMTAwL2FydGljbGUvZGV0YWlscy83ODM3MTI3XG4gICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDogZm9yICg7IGkgPCBsOyBpICs9IDIpIHtwYXNzID0gbGlzdFtpXS5jYWxsKGxpc3RbaSArIDFdIHx8IGNvbnRleHQpICE9PSBmYWxzZSAmJiBwYXNzfSBicmVha1xuICAgICAgICBjYXNlIDE6IGZvciAoOyBpIDwgbDsgaSArPSAyKSB7cGFzcyA9IGxpc3RbaV0uY2FsbChsaXN0W2kgKyAxXSB8fCBjb250ZXh0LCBhMSkgIT09IGZhbHNlICYmIHBhc3N9IGJyZWFrXG4gICAgICAgIGNhc2UgMjogZm9yICg7IGkgPCBsOyBpICs9IDIpIHtwYXNzID0gbGlzdFtpXS5jYWxsKGxpc3RbaSArIDFdIHx8IGNvbnRleHQsIGExLCBhMikgIT09IGZhbHNlICYmIHBhc3N9IGJyZWFrXG4gICAgICAgIGNhc2UgMzogZm9yICg7IGkgPCBsOyBpICs9IDIpIHtwYXNzID0gbGlzdFtpXS5jYWxsKGxpc3RbaSArIDFdIHx8IGNvbnRleHQsIGExLCBhMiwgYTMpICE9PSBmYWxzZSAmJiBwYXNzfSBicmVha1xuICAgICAgICBkZWZhdWx0OiBmb3IgKDsgaSA8IGw7IGkgKz0gMikge3Bhc3MgPSBsaXN0W2ldLmFwcGx5KGxpc3RbaSArIDFdIHx8IGNvbnRleHQsIGFyZ3MpICE9PSBmYWxzZSAmJiBwYXNzfSBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICAvLyB0cmlnZ2VyIHdpbGwgcmV0dXJuIGZhbHNlIGlmIG9uZSBvZiB0aGUgY2FsbGJhY2tzIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBwYXNzXG4gIH1cblxuICBmdW5jdGlvbiBpc0Z1bmN0aW9uKGZ1bmMpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGZ1bmMpID09PSAnW29iamVjdCBGdW5jdGlvbl0nXG4gIH1cblxuICByZXR1cm4gRXZlbnRzXG59KSJdfQ==
