define("app/views/start/todo/list",["require","module","exports","magix","app/model/TodoModel","app/exts/globalTip/index"],function(t,e,i){var d=t("magix"),s=t("app/model/TodoModel"),a=t("app/exts/globalTip/index");return d.View.extend({tmpl:'<div class=table-container> <div class=toolbar> <a href="/start/todo/add.htm" class="btn btn-brand">\u65b0\u5efa\u6d88\u606f</a> </div> <table class=table> <thead> <tr> <th class=w40>\u5e8f\u53f7</th> <th class=w60>ID</th> <th class=w100>\u6807\u9898</th> <th>\u5185\u5bb9</th> <th class="w80 center">\u64cd\u4f5c</th> </tr> </thead> <tbody> {{^if(isError)}} {{#for(item in todos)}} <tr> <td>{{__INDEX__}}</td> <td>{{item.id}}</td> <td>{{item.title}}</td> <td>{{item.content}}</td> <td class=center> <div class=operation> <a href="javascript:void(0);" class=color-blue mx-click="delItem({{__INDEX__}}, {{item.id}})">\u5220\u9664</a> </div> </td> </tr> {{/for}} {{/if}} {{#if(isError)}} <tr> <td colspan=5> <a href="javascript:void(0);" class=color-blue mx-click="fresh()">\u5237\u65b0</a> </td> </tr> {{/if}} </tbody> </table> </div> ',render:function(){var t=this;s.fetchList(this).then(function(e,i){t.data=e?{isError:!0}:{isError:!1,todos:i},t.setView()})},fresh:function(t){this.render()},delItem:function(t,e,i){var d=this;s.delItem(this,{id:i}).then(function(t,i){t||(a.show({content:"\u5220\u9664\u6210\u529f",type:"ok"}),d.data.todos.splice(e,1),d.setView())})}})});