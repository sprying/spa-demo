define("app/views/start/todo/add",["require","module","exports","magix","brix/loader","app/model/TodoModel","app/exts/globalTip/index"],function(t,e,n){var a=t("magix"),i=t("brix/loader"),o=t("app/model/TodoModel"),l=t("app/exts/globalTip/index");return a.View.extend({tmpl:'<div class=todo-add> <ol class=breadcrumb> <li><a href="/start/todo/list.htm">\u6d88\u606f\u5217\u8868</a></li> <li class="active title"><a href="/start/todo/add.htm">\u65b0\u5efa\u6d88\u606f</a></li> </ol> <form class=form bx-name="app/exts/auth/index" bx-options="{autoRender:true}"> <div class=form-element> <label class=form-label>\u6d88\u606f\u6807\u9898</label> <input type=text name=title class="input w260" id=J_title placeholder="\u8bf7\u8f93\u5165\u6d88\u606f\u6807\u9898" required maxlength=20 /> <span class="text-count ml10" bx-name="app/exts/textcount/index" bx-options="{\n        input:\'#J_title\',\n        count:20\n      }"></span> </div> <div class=form-element> <label class=form-label>\u6d88\u606f\u5185\u5bb9</label> <textarea name=content class="textarea w260" id=J_content placeholder="\u8bf7\u8f93\u5165\u6d88\u606f\u5185\u5bb9" required maxlength=100 />\n      <span class="text-count vb ml10" bx-name="app/exts/textcount/index" bx-options="{\n        input:\'#J_content\',\n        count:100\n      }"></span>\n    </div>\n    {{^if(isSending)}}\n    <button class="btn btn-brand w120" mx-click="doSubmit">\u65b0\u5efa\u6d88\u606f</button>\n    {{/if}}\n    {{#if(isSending)}}\n    <button class="btn btn-brand w120 btn-disabled">\u8bf7\u6c42\u4e2d...</button>\n    {{/if}}\n  </form>\n</div>',render:function(){this.data={},this.setView()},doSubmit:function(t){var e=this,n=$("#"+this.id);t.preventDefault(),i.query("app/exts/auth/index",n)[0].auth.test().then(function(){var t=n.find(".form").serializeJSON();o.addItem(e,t).then(function(t,n){t||(e.navigate("/start/todo/list.htm"),l.show({content:"\u65b0\u589e\u6210\u529f",type:"ok"}))}),e.data.isSending=!0,e.setView()})}})});