!function(e,t,n,r,i,a,o,s,u,f){f=1,u=function(e){return e.id||(e.id="mx_n_"+f++)},s("magix",["jquery","brix/event"],function(e,i){var a=e.isArray,o=e.isFunction,s=function(t){return"string"==e.type(t)},c=function(t){return"object"==e.type(t)},l=/\/\.(?:\/|$)|\/[^\/]+?\/\.{2}(?:\/|$)|\/\/+|\.{2}\//,h=/\?|(?!^)=/,d=/^https?:\/\//i,v=t.console,m=v&&v.error,p={tagName:"vframe",rootId:"magix_vf_root",coded:1,error:m?function(e){v.error(e)}:r},g=p.hasOwnProperty,$=function(e,t){return e&&g.call(e,t)},y=function(e){return function(t,n,r){switch(arguments.length){case 0:r=e;break;case 1:r=c(t)?b(e,t):$(e,t)?e[t]:null;break;case 2:null===n?(delete e[t],r=n):e[t]=r=n}return r}},w=function(e,t){return t.f-e.f||t.t-e.t},M=function(e,t){var n=this;return n instanceof M?(n.c=[],n.b=0|t||5,n.x=n.b+(e||20)):n=new M(e,t),n},b=function(e,t,n,r){for(r in t)n&&$(n,r)||(e[r]=t[r]);return e};b(M.prototype,{get:function(e){var t,n=this,r=n.c;return e="\x1f"+e,$(r,e)&&(t=r[e],t.f>=1&&(t.f++,t.t=f++,t=t.v)),t},list:function(){return this.c},set:function(e,t,n){var r=this,i=r.c,a="\x1f"+e,o=i[a];if(!$(i,a)){if(i.length>=r.x){i.sort(w);for(var s=r.b;s--;)o=i.pop(),o.f>0&&r.del(o.o)}o={o:e},i.push(o),i[a]=o}return o.v=t,o.f=1,o.t=f++,o.m=n,t},del:function(e){e="\x1f"+e;var t=this.c,n=t[e];n&&(n.f=-1,n.v=H,delete t[e],n.m&&(C(n.m,n.o,n),n.m=H))},has:function(e){return $(this.c,"\x1f"+e)}});var x=M(40),q=M(),C=function(e,t,n,r,i,o){for(a(e)||(e=[e]),t&&(a(t)||t.callee)||(t=[t]),r=0;r<e.length;r++)try{o=e[r],i=o&&o.apply(n,t)}catch(e){p.error(e)}return i},V=function(e,t,n){if(p.coded)try{n=decodeURIComponent(n)}catch(e){}V.p[t]=n},k={mix:b,has:$,toTry:C,config:y(p),start:function(e){b(p,e),I([e.iniFile],function(t){p=b(p,t,e),p["!tnc"]="vframe"!=p.tagName,ne.on("!ul",oe.loc),ne.on("changed",oe.loc),I(p.extensions||p.exts,ne.start)})},keys:Object.keys||function(e){var t,n=[];for(t in e)$(e,t)&&n.push(t);return n},local:y({}),path:function(e,t){var n,r=e+"\x1f"+t,i=q.get(r),a=H;if(!q.has(r)){for(d.test(e)&&(n=e.indexOf("/",8),n<0&&(n=e.length),a=e.slice(0,n),e=e.slice(n)),e=e.replace(/[#?].*$/,H).replace(/\/[^\/]*$/,"/"),(d.test(t)||"/"==t.charAt(0))&&(e=H),i=e+t;l.test(i);)i=i.replace(l,"/");q.set(r,i=a+i)}return i},toObject:function(e){var t,n,r=x.get(e);return r||(V.p=t={},n=e.replace(/[#?].*$/,H),h.test(n)&&(n=H),e.replace(n,H).replace(/([^=&?\/#]+)=?([^&#?]*)/g,V),x.set(e,r=[n,t])),{path:r[0],params:b({},r[1])}},toUrl:function(e,t,n){var r,i,a,o=[];for(i in t)r=t[i],(!n||r||$(n,i))&&(p.coded&&(r=encodeURIComponent(r)),a=1,o.push(i+"="+r));return a&&(e=(e&&e+(h.test(e)?"&":"?"))+o.join("&")),e},toMap:function(e,t){var n,r,i,a={},o=arguments.length>1;if(e&&(i=e.length))for(n=0;n<i;n++)r=e[n],a[o?r[t]:r]=o?r:1+(0|a[r]);return a},Cache:M},P=function(){},_=function(e,t,n,r){var i=t.prototype;i.constructor=t,P.prototype=i;var a=new P;return b(a,n),b(e,r),a.constructor=e,e.prototype=a,e},I=function(e,t){e?(a(e)||(e=[e]),require(e,t)):t&&t()},T={fire:function(e,t,n,r){var i="\x1f"+e,a=this,o=a[i];if(o){t||(t={}),t.type||(t.type=e);for(var s,u,f=o.length,c=f-1;f--;)s=r?f:c-f,u=o[s],(u.d||u.r)&&(o.splice(s,1),c--),u.d||C(u.f,t,a);n=n||c<0}n&&delete a[i]},on:function(e,t,n,r){var i=this,a="\x1f"+e,o=i[a]||(i[a]=[]),s={f:t},u=0|n;u!==n?(n&&n.on&&r&&(n.on(r,function(){s.d=1},C),n=0),s.r=n,o.push(s)):o.splice(u,0,s)},off:function(e,t){var n="\x1f"+e,r=this[n];if(r)if(t){for(var i,a=r.length-1;a>=0;a--)if(i=r[a],i.f==t&&!i.d){i.d=1;break}}else delete this[n]},once:function(e,t){this.on(e,t,C)}};k.mix(k.local,T),k.Event=T;var U,O,j,R,A,E,H="",N="path",F=k.keys,L=k.toUrl,S=k.toObject,Z=k.config(),D=k.Cache(),z=k.Cache(),B=t.location,Q=t.history,J={params:{},href:H},G="params",K=function(e,t,n){if(e){n=this[G],e=(e+H).split(",");for(var r=0;r<e.length&&!(t=$(n,e[r]));r++);}return t},W=function(){return this[N]},X=function(){return this.view},Y=function(e,t,n,r){return n=this,r=n[G],arguments.length>1?r[e]=t:r[e]||H},ee=function(e,t){var n,r,i,a;return O||(O={rs:Z.routes||{},nf:Z.unfoundView},i=Z.defaultView,O.dv=i,a=Z.defaultPath,n=O.rs,O.f=o(n),O.f||n[a]||!i||(n[a]=i),O[N]=a),e||(e=O[N]),n=O.rs,r=O.f?n.call(Z,e,t):n[e],{view:r||O.nf||O.dv,path:e}},te=function(e,t){var n=e.href,r=t.href,i=n+"\x1f"+r,a=z.get(i);if(!a){var o,s,u,f;a={isParam:K,isPath:W,isView:X,location:t,force:!e.get},a.view=u,a[N]=u,a[G]=f={};var c,l,h=e[G],d=t[G],v=[N,"view"].concat(F(h),F(d));for(c=v.length-1;c>=0;c--)l=v[c],1==c&&(h=e,d=t,f=a),s=h[l],u=d[l],s!=u&&(f[l]={from:s,to:u},o=1);z.set(i,a=[o,a])}return a},ne=b({start:function(){j=Z.edge,R=j&&Q.pushState,A=j&&!R,E=R?"srcQuery":"srcHash",ne.bind(R),ne.route()},parse:function(e,t){e=e||B.href;var n,r,i,a,o,s,u=D.get(e);return u||(i=e.replace(/(?:^https?:\/\/[^\/]+|#.*$)/gi,H),a=e.replace(/^[^#]*#?!?/,H),o=S(i),s=S(a),A&&(s[N]=k.path(B.pathname,s[N])),u={get:Y,set:Y,href:e,refHref:J.href,srcQuery:i,srcHash:a,query:o,hash:s,params:b(b({},o[G]),s[G])},D.set(e,u)),t&&!u.view&&(r=u.hash[N]||j&&u.query[N],n=ee(r,u),b(u,n)),u},route:function(){var e=ne.parse(0,1),t=te(J,e);J=e,t[0]&&(U=e,ne.fire("changed",t[1]))},navigate:function(e,t,n){if(U){!t&&c(e)&&(t=e,e=H);var r=S(e),i=U.query[G],a=r[G],o=r[N],s=U[N];if(b(a,t),o){if(o=k.path(s,o),A)for(var u in i)$(i,u)&&!$(a,u)&&(a[u]=H)}else o=s,a=b(b({},U[G]),a),r[G]=a;o=L(r[N]=o,a,j?N:i),o!=U[E]&&(R?(Q[n?"replaceState":"pushState"](H,H,o),ne.route()):(b(r,U,r),r.srcHash=o,ne.fire("!ul",{loc:U=r}),o="#!"+o,n?B.replace(o):B.hash=o),ne.did=1)}}},T);k.Router=ne,ne.bind=function(t){var n=location.href;t?e(window).on("popstate",function(e){var t=location.href==n;!ne.did&&t||(ne.did=1,ne.route())}):e(window).on("hashchange",ne.route)};var re={},ie={},ae={},oe=k.mix({all:function(){return re},add:function(e,t){$(re,e)||(re[e]=t,oe.fire("add",{vframe:t}))},get:function(e){return re[e]},remove:function(e,t){var n=re[e];n&&(delete re[e],oe.fire("remove",{vframe:n,fcc:t}))},loc:function(e){var t,n=e.loc;if(n?t=1:n=e.location,b(ie,n),!t){b(ae,e);var r=Ce.root(oe,ie,ae);ae.view?r.mountView(n.view):Ce.update(r)}}},T);k.VOM=oe;var se,ue,fe,ce,le,he,de,ve,me,pe,ge,$e=[],$=k.has,ye="querySelectorAll",we=function(e){return"object"==typeof e?e:n.getElementById(e)},Me=function(e,t,r){return t=we(e),t&&(r=fe?n[ye]("#"+u(t)+le):t.getElementsByTagName(se)),r||$e},be=function(e,t,n){if(e=we(e),t=we(t),e&&t)if(e!==t)try{n=he?t.contains(e):16&t.compareDocumentPosition(e)}catch(e){n=0}else n=1;return n},xe=function(e){if(e.cC==e.rC){var t=e.view;t&&!e.fcc&&(e.fcc=1,e.fca=0,t.fire("created"),e.fire("created"));var n=e.id,r=ge.get(e.pId);r&&!$(r.rM,n)&&(r.rM[n]=r.cM[n],r.rC++,xe(r))}},qe=function(e,t){if(t||(t={}),!e.fca&&e.fcc){e.fcc=0;var n=e.view,r=e.id;n&&(e.fca=1,n.fire("alter",t),e.fire("alter",t));var i=ge.get(e.pId);i&&$(i.rM,r)&&(i.rC--,delete i.rM[r],e._p||qe(i,t))}},Ce=function(e,t){var n=this;n.id=e,n.cM={},n.cC=0,n.rC=0,n.sign=1,n.rM={},n.pId=t,ge.add(e,n)};Ce.root=function(e,t,r){if(!de){se=Z.tagName,ue=Z["!tnc"],fe=ue&&n[ye],le=" "+se+"[mx-vframe=true]",ce=ue&&!fe;var i=n.body;he=i.contains,me=t,pe=r,ge=e;var a=Z.rootId,o=we(a);o||(o=n.createElement(se),o.id=a,i.appendChild(o),o=null),de=new Ce(a)}return de},Ce.update=function(e){var t=e.view;if(e.viewInited&&t&&t.sign>0){t.olChg(pe)&&t.render(pe);for(var n,r=e.children(),i=0,a=r.length;i<a;i++)(n=ge.get(r[i]))&&Ce.update(n)}},b(b(Ce.prototype,T),{mountView:function(e,t,n){var r=this,i=we(r.id);if(!r._a&&i&&(r._a=1,r._t=i.innerHTML),r.unmountView(n),r._d=0,e){r.path=e;var a=k.toObject(e),o=a.path,s=++r.sign;I(o,function(e){if(s==r.sign){Te.prepare(e,ge);var n=new e({owner:r,id:r.id,$:we,$i:be,path:o,vom:ge,location:me});r.view=n;var u=function(e){r.mountZoneVframes(e.id)};n.on("interact",function(){n.hasTmpl||(i&&(i.innerHTML=r._t),u(we)),n.on("rendered",u),n.on("prerender",function(e){r.unmountZoneVframes(e.id,0,1)||qe(r)})},0),n.load(b(a.params,t),pe)}})}},unmountView:function(e){var t=this,n=t.view;if(n){ve||(ve={}),t._d=1,t.unmountZoneVframes(0,e,1),qe(t,ve),t.view=0,n.oust();var r=we(t.id);r&&t._a&&!e&&(r.innerHTML=t._t),t.viewInited=0,ve=0}t.sign++},mountVframe:function(e,t,n,r,i){var a=this;a.fcc&&!r&&qe(a);var o=ge.get(e);return o||($(a.cM,e)||a.cC++,a.cM[e]=1,o=new Ce(e,a.id)),o._p=r,o.mountView(t,n,i),o},mountZoneVframes:function(e,t,n,r){var i=this;e=e||i.id,i.unmountZoneVframes(e,r,1);var a=Me(e),o=a.length,s={};if(o)for(var f,c,l,h=0;h<o;h++)if(f=a[h],c=u(f),!$(s,c)&&(l=f.getAttribute("mx-view"),(ce?f.getAttribute("mx-vframe"):1)||l)){i.mountVframe(c,l,t,n,r);for(var d,v=Me(f),m=0,p=v.length;m<p;m++)d=v[m],s[u(d)]=1}xe(i)},unmountVframe:function(e,t,n){var r=this;e=e||r.id;var i=ge.get(e);if(i){var a=i.fcc;i.unmountView(t),ge.remove(e,a);var o=ge.get(i.pId);o&&$(o.cM,e)&&(delete o.cM[e],o.cC--,n||xe(o))}},unmountZoneVframes:function(e,t,n){var r,i,a=this,o=a.cM;for(i in o)e&&!be(i,e)||a.unmountVframe(i,t,r=1);return n||a._d||xe(a),r},parent:function(e){var t=this,n=t;for(e=e>>>0||1;n&&e--;)n=ge.get(n.pId);return n},children:function(){return k.keys(this.cM)},invokeView:function(e,t){var n,r=this;if(r.viewInited){var i=r.view,a=i&&i[e];a&&(n=C(a,t||$e,i))}return n}}),k.Vframe=Ce;var Ve=[],ke=0,Pe=function(e,t){return function(){t=this,t.sign>0&&(t.sign++,t.fire("rendercall"),_e(t),C(e,arguments,t))}},_e=function(e,t){var n,r,i=e.$res;for(n in i)r=i[n],(t||r.x)&&Ie(i,n,1)},Ie=function(e,t,n){var r,i,a=e[t];a&&(r=a.e,i=r&&r.destroy,i&&C(i,Ve,r),a.k&&!n||delete e[t])},Te=function(e){var t=this;b(t,e),t.$ol={ks:[]},t.$res={},t.sign=1,C(Te.$,e,t)},Ue=Te.prototype;Te.$=[],Te.prepare=function(e){if(!e["\x1f"]){e["\x1f"]=1;var t=e.prototype;t.render=Pe(t.render)}},Te.mixin=function(e,t){t&&Te.$.push(t),b(Ue,e)},b(b(Ue,T),{render:r,navigate:ne.navigate,init:r,hasTmpl:!0,load:function(){var e=this,t=e.hasTmpl,n=arguments,r=function(r){e.tmpl=r,e.fire("interact",0,1),C(e.init,n,e),e.fire("inited",0,1),e.owner.viewInited=1,e.render(),!t&&!e.rendered&&(e.rendered=1,e.fire("primed",0,1))};t?e.fetchTmpl(e.path,e.wrapAsync(r)):r()},beginUpdate:function(e){var t=this;t.sign>0&&t.rendered&&t.fire("prerender",{id:e||t.id})},endUpdate:function(e){var t=this;t.sign>0&&(t.rendered||(t.fire("primed",0,1),t.rendered=1),t.fire("rendered",{id:e||t.id}))},wrapAsync:function(e,t){var n=this,r=n.sign;return function(){r>0&&(!t||r==n.sign)&&e&&e.apply(this,arguments)}},setHTML:function(e,t){var n,r=this;r.beginUpdate(e),r.sign>0&&(n=r.$(e))&&(r.undelegateEvents(n),n.innerHTML=t,r.delegateEvents(n)),r.endUpdate(e)},observeLocation:function(e){var t,n=this;t=n.$ol,t.f=1;var r=t.ks;c(e)&&(t.pn=e.path,e=e.params),e&&(t.ks=r.concat((e+H).split(",")))},olChg:function(e){var t,n=this,r=n.$ol;return r.f&&(r.pn&&(t=e.path),t||(t=e.isParam(r.ks))),t},oust:function(){var e=this;e.sign>0&&(e.sign=0,e.fire("destroy",0,1,1),_e(e,1),e.undelegateEvents("#"+e.id)),e.sign--},inside:function(e,t){var n,r,i=this;for(t=(t+H).split(","),r=t.length-1;r>=0&&!(n=i.$i(e,t[r]));r--);return n},manage:function(e,t,n){var r=this,i=1,a=r.$res;e&&!s(e)&&(n=t,t=e,e=H),e?Ie(a,e):(i=0,e="res_"+ke++);var o={k:i,e:t,x:n};return a[e]=o,t},getManaged:function(e,t){var n=this,r=n.$res,i=e?null:r;return e&&$(r,e)&&(i=r[e].e,t&&delete r[e]),i},removeManaged:function(e){return this.getManaged(e,1)},destroyManaged:function(e){Ie(this.$res,e,1)}}),k.View=Te;var Oe={},je="?t="+Math.random(),Re=i("mx-"),Ae={},Ee={};Ue.delegateEvents=function(t){Re.delegate(e(t),this)},Ue.undelegateEvents=function(t){Re.undelegate(e(t),this)},Ue.fetchTmpl=function(t,n){var r=this;if("tmpl"in r)n(r.tmpl);else if($(Ae,t))n(Ae[t]);else{var i=t.indexOf("/"),a=t.substring(0,i);Oe[a]||(Oe[a]=require.s.contexts._.config.paths[a]);var o=Oe[a]+"/"+t.substring(i+1)+".html",s=Ee[o],u=function(e){n(Ae[t]=e)};s?s.push(u):(s=Ee[o]=[u],e.ajax({url:o+je,success:function(e){C(s,e),delete Ee[o]},error:function(e,t){C(s,t),delete Ee[o]}}))}},Te.extend=function(e,t,n){var r=this;o(t)&&(n=t,t=null);var i=function(e){r.call(this,e),n&&n.call(this,e)};return i.extend=r.extend,_(i,r,e,t)};var He=c,Ne=k.toString,Fe=function(){this.id="m"+f++},Le=function(e){return function(t,n,r){var i,a,s,u=this,f="\x1f"+e;u[f]||(u[f]={}),s=u[f],o(t)&&(t=k.toTry(t)),t&&!He(t)&&(i={},i[t]=n,t=i);for(a in t)r&&$(s,a)||(s[a]=t[a])}};k.mix(Fe.prototype,{sync:r,getFormParams:function(){return this["\x1fFORM"]},getUrlParams:function(){return this["\x1fURL"]},setFormParams:Le("FORM"),setUrlParams:Le("URL"),get:function(e,t,n){var r=this,i=arguments.length,a=2==i,o=r.$attrs;if(i){for(var s=(e+H).split(".");o&&s[0];)o=o[s.shift()];s[0]&&(o=n)}return a&&Ne.call(t)!=Ne.call(o)&&(o=t),o},set:function(e,t){var n=this;if(n.$attrs||(n.$attrs={}),e){if(!He(e)){var r={};r[e]=t,e=r}for(var i in e)n.$attrs[i]=e[i]}},request:function(e,t){var n=this;n.sync(function(r,i){He(i)||(i={data:i}),n.set(i),e(r,t)})}}),k.Model=Fe,Fe.extend=function(e,t,n){var r=this;return _(function(){r.call(this),n&&n.call(this)},r,e,t)};var Se=a,Ze=o,De=["formParams","urlParams"],ze=Date.now||function(){return+new Date},Be=t.JSON,Qe=function(e,t,n,r){return t?Ze(e)&&n.push(Qe(C(e))):r=Be?Be.stringify(e):ze(),r},Je=function(e,t){for(var n,r=[Qe(t),Qe(e)],i=De.length-1;i>-1;i--)n=De[i],Qe(e[n],1,r),Qe(t[n],1,r);return Qe(e.key,1,r),r.join("\x1f")},Ge=function(e){var t=e.cache;return t&&(t=!0===t?12e5:0|t),t},Ke=function(e){throw Error(e)},We=function(e,t,n){var r=this;r.$mClz=e,r.$mCache=k.Cache(t,n),r.$mReqs={},r.$mMetas={},r.id="mm"+f++},Xe=function(e){var t=this;t.$host=e,t.$reqs={},t.sign=1,t.id="mr"+f++,t.$queue=[]},Ye=[].slice,et=function(e,t,n,r){var i=function(a){return e.apply(t,[n,r,a,i.ost])};return i},tt=function(e,t){var n=t.b,r=t.a,i=r[n];if(i){var a=i.q;delete r[n],C(a,e,i.e)}},nt=function(e,t,n,r){var i,a,o=this,s=t.a,u=t.c,f=t.d,c=t.g,l=t.i,h=t.j,d=t.k,v=t.l,m=t.m,p=t.n,g=t.o;t.b++,delete u[o.id];var $=o.$mm,y=$.key;if(f[e+1]=o,n)t.e=1,i=1,t.f=n,c.msg=n,c[e]=n,h.fire("fail",{model:o,msg:n}),a=1;else if(!l.has(y)){y&&l.set(y,o),$.time=ze();var w=$.after;w&&C(w,o),$.cls&&h.clearCache($.cls),h.fire("done",{model:o}),a=1}if(!s.$ost&&!r){if(1==d){var M=v?m[e]:m;M&&(p[e+1]=C(M,[i?c:null,o,c],s))}else if(2==d){g[e]={m:o,e:i,s:n};for(var b,x,q=g.i||0;b=g[q];q++)x=v?m[q]:m,b.e&&(c.msg=b.s,c[q]=b.s),p[q+1]=C(x,[b.e?c:null,b.m,c].concat(p),s);g.i=q}t.b==t.h&&(t.e||(c=null),p[0]=c,4==d&&(f[0]=c,p[1]=C(m,f,s)),s.$busy=0,s.doNext(p))}a&&h.fire("finish",{msg:n,model:o})},rt=function(e,t,n,r,i){if(e.$ost)return e;if(e.$busy)return e.next(function(){rt(this,t,n,r,i)});e.$busy=1,e.sign++;var a=e.$host,o=a.$mCache,s=a.$mReqs,u=e.$reqs;Se(t)||(t=[t]);var f=t.length,c=[],l=Se(n);l&&(c=new Array(n.length));for(var h,d={a:e,b:0,c:e.$reqs,d:new Array(f),g:{},h:f,i:o,j:a,k:r,l:l,m:n,n:c,o:[]},v=0;v<t.length;v++)if(h=t[v]){var m=a.getModel(h,i),p=m.entity,g=p.$mm.key,y=et(nt,p,v,d);y.id=e.id,g&&$(s,g)?s[g].q.push(y):m.update?(u[p.id]=p,g&&(s[g]={q:[y],e:p},y=tt),p.request(y,{a:s,b:g})):y()}else Ke("empty model");return e},it=function(e,t){return function(n,r){var i=Ye.call(arguments,1);return rt(this,n,i.length>1?i:r,e,t)}};return b(We,{create:function(e,t,n){return new We(e,t,n)}}),b(Xe.prototype,{fetchAll:function(e,t){return rt(this,e,t,4)},save:function(e,t){return rt(this,e,t,4,1)},fetchOrder:it(2),fetchOne:it(1),next:function(e){var t=this;return t.$ost||(t.$queue.push(e),t.doNext(t.$args)),t},doNext:function(e){var t=this;if(!t.$busy&&!t.$ost){t.$busy=1;var n=++t.sign;t.$ntId=setTimeout(function(){t.$busy=0,t.$args=e;var r,i=t.$queue,a=i.shift();a&&(r=C(a,e,t),n==t.sign&&t.doNext(r===i.$?e:[null,r]))},0)}},destroy:function(){var e=this;e.$ost=1,clearTimeout(e.$ntId);var t=e.$host,n=e.$reqs,r=t.$mReqs;for(var i in n){var a,o,s=n[i],u=s.$mm.key;if(u&&$(r,u)){a=r[u],o=a.q;for(var f,c=0;c<o.length;c++)f=o[c],f.id==e.id&&(f.ost=1)}}e.$reqs={},e.$queue=[],e.$busy=0}}),b(b(We.prototype,T),{registerModels:function(e){var t=this,n=t.$mMetas;Se(e)||(e=[e]);for(var r,i,a,o=0;o<e.length;o++)(r=e[o])&&(i=r.name,i?n[i]&&Ke("already exist:"+i):Ke("miss name"),a=Ge(r),a&&(r.cache=a),n[i]=r)},registerMethods:function(e){b(this,e)},create:function(e){var t=this,n=t.getMeta(e),r=Ge(e)||n.cache,i=new t.$mClz;i.set(n),i.$mm={name:n.name,after:n.after,cls:n.cleans,key:r&&Je(n,e)},e.name&&i.set(e),i.setUrlParams(n.urlParams),i.setFormParams(n.formParams),i.setUrlParams(e.urlParams),i.setFormParams(e.formParams);var a=n.before;return a&&C(a,i),t.fire("start",{model:i}),i},getMeta:function(e){var t=this,n=t.$mMetas,r=e.name||e,i=n[r];return i||Ke("Unfound:"+r),i},getModel:function(e,t){var n,r,i=this;return t||(n=i.getCached(e)),n||(r=1,n=i.create(e)),{entity:n,update:r}},createRequest:function(e,t,n){return e.manage(t,new Xe(this),arguments.length<3||n)},clearCache:function(e){var t=this,n=t.$mCache,r=n.list();e=k.toMap((e+H).split(","));for(var i=0;i<r.length;i++){var a=r[i],o=a.v,s=o&&o.$mm;s&&$(e,s.name)&&n.del(s.key)}},getCached:function(e){var t,n,r=this,i=r.$mCache,a=r.getMeta(e),o=Ge(e)||a.cache;if(o&&(n=Je(a,e)),n){var s=r.$mReqs,u=s[n];u?t=u.e:(t=i.get(n))&&o>0&&ze()-t.$mm.time>o&&(i.del(n),t=0)}return t}}),k.Manager=We,k})}(0,window,document,function(){},0,0,0,define);